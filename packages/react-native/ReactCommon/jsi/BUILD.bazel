load("//:variables.bzl", "COPTS")

cc_library(
    name = "jsi",
    copts = COPTS + [
        "-Wno-non-virtual-dtor",
        "-I.",
        "-std=c++20"
    ],
    srcs = glob(
        include = ["jsi/*.cpp", "jsi/*.h"],
        exclude = [
            "jsi/jsilib-posix.cpp",
            "jsi/jsilib-windows.cpp",
            "**/test/*"
        ]
    ),
    hdrs = glob(["jsi/*.h"]),
    deps = [
        "@folly"
    ],
    includes = ["."],
    visibility = ["//visibility:public"]
)